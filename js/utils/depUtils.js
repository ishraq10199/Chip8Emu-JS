const getInstanceProvider = () => {
  /*
.@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@
.@...............+#@@@*..................-@=....=.%..%.%..@%%=-:..=%%=@##............@.-@@@@@*..................@@
.@...............+#@@@*..................-@=....=.%..%.%..@%%=-:..=%%=@##............@.-@@@@@*..................@@
.@..::...........:...@#...:.::.%+....@@@@@@@@@.....+@.:.@@..*.........*-%.:..:.....@.@....-@@@@%.:.:::::.::.....@@
.@.::............*.-.@#.....::.#+.*@@@@@@@.@@@@@@.=..-..@.=....::....=.-..:.:.....@.@@........#@@........::.....@@
.@..:............:@..@%.....::.*+.@@@+........@@@.#.%%.@@.#..:..:::..%.%.:........@.@.....:=-..:@@......::-.....@@
.@.::............@#@.@*.....::.++.@@....::......@@.....@-+...::...::.@.@..........@.@.*+.........@#..::.:.-.....@@
.@.:.............@.@.@......::.+*.@@.......%@:.@.@@....@.+..::.......%.%..:::::--.@.@.##@%#-.....@@..::..:-.....@@
.@.:.............@@@...:....::.+#.@@*@@.@@@@.=@=@@@....@.*.:.::....:.%.=..........@.@...:##@*-=+.@@..:::::::....@@
.@................@..+......::.+%.+@@@@.@..@*@..@@@@...@.*..:.:...::.*...@@@@-...#.@@+%@....*--..@%.....:.::....@@
.@...............=#%@@*.....:..=%....@@..@@..@@@@.@@@..@.*..:.:..:::.=.@@@-@@@@@.=.@...%+...=..+.@@.....-.-:....@@
.@...............-...@%.....:..+#...#@..@@.#@@..*..@@..@.*..:.:..:.:..@@@@.@@@@@@..@...=@.#-+..=.@@..:..:.:.....@@
.@...............==..@#.....:..*+...=@.%.@@@.@++@@@@@..@.*...:...::...@@@..:=-.@@..@...=@..-*..-.@@..::.:.-.....@@
.@............:.+.%..@@.....::.#+.-.@@%@@.@.+.@..%@@#..@-+............@..@.=@@@@@..@...-@.:-+.:-.@@..:..:.::....@@
.@............:.=....@@.....::.##....@..:.@.*.@@@@.....@==..:::.:.:..@@..@...:..@.:@...=@..=+.--.@@.....:.::....@@
.@............:..:@#.*%..::::..*#...@@@@@.@..-*@@......%==..::::::::.@@@@@@....@@..+-..+@..*+.=..@@.....:.-.....@@
.@...............@=@@.*..::....:....@@.*.@@..#.@@@@@@.............:.......@@@@@@@..%+..*@..*+.+..@%.......-.....@@
.@...............%@@-.@.........@@@@@..=:%...-==@@@@@@@@@...::::......+#........@.:::..*%..==.+..@*..:+=.::.....@@
.@................@@@.@......@@@@@@@..-@@............@@@@@%.....::...=@+.@@@@@@@@.:.+@.+-..+#==..@#-%@*#.:.:....@@
.@...............@-.:.@...%@@@@@@..@@......@@@..........@@@@@.....:..@+..@@...@@@..%+=#.:@@@=.=@=@*.-.%#.::.....@@
.@.:.............%#...-..@@@@@....@.@......@.@@@.-........@@@@=.....+@...@@.@@@:...-@.@.+--:.=...%*.@@@..::.....@@
.@...............=.@@...@@@+......@.+.@@@@.@@=@@...@@@......@@@@@..:@+...@@@@@...+..=++*..-+-....@@......::.....%@
.@................%@@@..@@....+..@@@@..@@@.@@@@@@@@@..@@@.....@@@..%#.=*.=@@@...@:@..@.#+%@%@@@@*@@......::.....@@
.@..............=.@..@=.@@....*.+:=.@@=@@@..@@.#..@#@.@@@......@@..@*.#:-.......@.@..@.-=........#*..:...:......@@
.@..............*+@..@@.@@@-.....@@@@@.-@#...-@-@@@..@@@@.....@@@..%#.#.........@.@..@.*#.....:..@*.............@@
.@.:.....:::::..#.@@@@@.@@@@@@.....@@@......@+::@.#@@.@@.....@@@@..*%:..@@@@.......#@............@-..@@@@@@@-...@@
.@.:::..:.:..::.@.+...@...%@@@@@@:.........@@...@.@.@.....@@@@-....:+@.@@@@@@@@.++.@..%#+#%%%%%%:@::@@-..:%@@:..@@
.@.:.::..:::::..@.@@@@@......@@@@@+@@..@@..@.@@@@@.@:.=..@@@@@...:...%.@-.....@.=..@*@*#%%###%%#.@#:@.......@@..@@
.@.:::..........@.@..@@...:....@.@@..=@.@.@+.=@@..@....+.@.............@@@@@@@@.++.+.+...........@@.@%.@@+.*@%..@@
.@.....::::...:.@.@..@@........@..@.@%.@@.@.@..@@@.@@@@:.@@........*@+..#%@@-......@.@@@@@@@@@@@@@#.@@.....@:...@@
.@....:..::.::..@.@..@@...::...@@@@@.@@@..@@@....@:@..=.=@@.#%@@%*=:..........==:..@.:-%@+.+@.@@@@=.@@@@@@=...*@@@
.@.....::::::...@.@@@@@..::.:.....@@..@.@+....@@@..@@@@@@@..*#%%@@@@@@@@...........@-=.@.*.#:.+......*.....@@@@.%@
.@.:.......::::.@.-.........:..%..@@...=+@@..@@@@.@....@@.............@@..........+@.%*@.@.@.%%....=@+=..@@@...@@@
.@..............@.@.+@@@@#.....@..@@.@@.....@@.@.+......@@.........=:.@@...::...:.%+.....@.@.........@@@@:.@@@@.@@
.@@@@@@@@@@@@@@@@.@@@-...#.--:.#:.@@@@@@@@@@@@...@@@@@@@@@:@@@@@@@@@@@@@.-====++=.@%@@@@@@..*@@@@@@+#...@@@@@@..=#
.@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@@#@@
*/

  const ns = Object.create(null);
  const instanceFns = Object.create(null);

  ns.addInstance = (moduleName, instanceFn) => {
    instanceFns[moduleName] = instanceFn.bind(null, ns);
  };

  ns.getInstance = (moduleName) => instanceFns[moduleName]();

  ns.instanceFns = instanceFns;

  return ns;
};

/**
 *
 * @param {string} moduleName
 * @param {Function[]} fnDeps
 */
const checkFnDependencies = (moduleName = "module", fnDeps = []) => {
  for (const fn of fnDeps) {
    if (typeof fn !== "function") {
      throw new Error(
        `[error] ${fn.name} not provided during ${moduleName} instancing`
      );
    }
  }
};

/**
 *
 * @param {string} moduleName
 * @param {Object} instanceDeps
 */
const checkInstanceDependencies = (
  moduleName = "module",
  instanceDeps = {}
) => {
  for (const [k, v] of Object.entries(instanceDeps)) {
    if (!v) {
      throw new Error(
        `[error] ${k} not provided during ${moduleName} instancing`
      );
    }
  }
};

export { checkFnDependencies, checkInstanceDependencies, getInstanceProvider };
